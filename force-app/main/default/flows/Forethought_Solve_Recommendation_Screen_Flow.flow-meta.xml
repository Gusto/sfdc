<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <actionCalls>
        <name>Approve_Send_Email</name>
        <label>Approve - Send Email</label>
        <locationX>1172</locationX>
        <locationY>1646</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>Email_Sent_Success</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Initialize_Fault_Path_Details</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <elementReference>DefaultToAddress</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderType</name>
            <value>
                <stringValue>OrgWideEmailAddress</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <elementReference>$Label.DefaultFromAddress</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <elementReference>SubjectwithThreadId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>EmailBody.fieldValue</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>relatedRecordId</name>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientId</name>
            <value>
                <elementReference>record.ContactId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>logEmailOnSend</name>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Send_Email_to_Contact</name>
        <label>Send Email to Contact</label>
        <locationX>72</locationX>
        <locationY>1214</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>Insert_EmailMessage</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <elementReference>DefaultToAddress</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderType</name>
            <value>
                <stringValue>OrgWideEmailAddress</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <elementReference>$Label.DefaultFromAddress</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <elementReference>SubjectwithThreadId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>EmailBodyEditable.fieldValue</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>relatedRecordId</name>
            <value>
                <elementReference>record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <apiVersion>62.0</apiVersion>
    <assignments>
        <name>Assign_Default_To_Addresses</name>
        <label>Assign Default To Addresses</label>
        <locationX>1766</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>DefaultToAddress</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Customer_Email_details.FromAddress</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Use_Forethought_Solve_Recommendation</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Default_ToAddresses</name>
        <label>Assign Default ToAddresses</label>
        <locationX>204</locationX>
        <locationY>674</locationY>
        <assignmentItems>
            <assignToReference>DefaultToAddress</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_EmailMessage.FromAddress</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Internal_AI_Solve_Response</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Solve_Record_to_a_Variable</name>
        <label>Assign Solve Record to a Variable</label>
        <locationX>1903</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>SolveRecord</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Forethought_Solve_Recommendations</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Case_Eligible_For_Solve_Recommendation</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Capture_Rejection_Feedback</name>
        <label>Capture Rejection Feedback</label>
        <locationX>2096</locationX>
        <locationY>1430</locationY>
        <assignmentItems>
            <assignToReference>record.Has_A_Valid_Recommendation__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>record.Rejection_Reason__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Rejection_Reason</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>record.Rejection_Feedback__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Rejection_Feedback</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>record.QA_User__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>record.QA_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Rejected</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>record.Auto_Solve_Model__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Forethought</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>record.Auto_Solve_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Rejected</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Rejection_QA_Details_on_Case</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Capture_values_from_the_Email_screen</name>
        <label>Capture values from the Email screen</label>
        <locationX>1172</locationX>
        <locationY>1322</locationY>
        <assignmentItems>
            <assignToReference>EmailMessageNew.FromAddress</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.DefaultFromAddress</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMessageNew.ToAddress</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>DefaultToAddress</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMessageNew.Subject</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SubjectwithThreadId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMessageNew.HtmlBody</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>EmailBody.fieldValue</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMessageNew.ParentId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMessageNew.FromName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.DefaultFromAddress</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailMessageNew.Solve_Email__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SendScreen</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Initializing Fault Line details for fault paths in objExceptionLogEvent record.</description>
        <name>Initialize_Fault_Path_Details</name>
        <label>Initialize Fault Path Details</label>
        <locationX>1832</locationX>
        <locationY>1754</locationY>
        <assignmentItems>
            <assignToReference>objExceptionLogEvent.Message__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>strExceptionLogMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>objExceptionLogEvent.EventUuid</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.InterviewGuid</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>objExceptionLogEvent.Method_Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentStage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>objExceptionLogEvent.Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Flow</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SolveRecord.Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SolveRecord.QA_User__c</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>Exception_Log_Event</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_QA_details_on_Case</name>
        <label>Update QA details on Case</label>
        <locationX>1172</locationX>
        <locationY>1538</locationY>
        <assignmentItems>
            <assignToReference>record.Auto_Solve_Attempt__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>record.QA_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Approved</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>record.QA_User__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>record.Auto_Solve_Model__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Forethought</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>record.Auto_Solve_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Attempted</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Approve_Send_Email</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>ApproveChoice</name>
        <choiceText>Approve</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Approve</stringValue>
        </value>
    </choices>
    <choices>
        <name>ClaimChoice</name>
        <choiceText>Claim</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Claim</stringValue>
        </value>
    </choices>
    <choices>
        <name>RejectChoice</name>
        <choiceText>Reject</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Reject</stringValue>
        </value>
    </choices>
    <constants>
        <name>ApprovalMessage</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Approval was successful and the email has been sent to the contact. Thank you!</stringValue>
        </value>
    </constants>
    <constants>
        <name>Constant_No</name>
        <dataType>String</dataType>
        <value>
            <stringValue>No</stringValue>
        </value>
    </constants>
    <constants>
        <name>RejectionMessage</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Rejection has been captured. No email has been sent to the contact. Thank you!</stringValue>
        </value>
    </constants>
    <decisions>
        <description>If the case is already approved already, display error screen</description>
        <name>Case_Already_Accepted_Rejected</name>
        <label>Case Already Accepted/Rejected</label>
        <locationX>1183</locationX>
        <locationY>782</locationY>
        <defaultConnector>
            <targetReference>Get_Customer_Email_details</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Ready for routing</defaultConnectorLabel>
        <rules>
            <name>Accepted_Rejected</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>record.QA_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approved</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>record.QA_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Rejected</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Recommendation_Used</targetReference>
            </connector>
            <label>Accepted/Rejected</label>
        </rules>
    </decisions>
    <decisions>
        <name>Case_Assigned_to_the_current_user</name>
        <label>Case Assigned to the current user?</label>
        <locationX>1932</locationX>
        <locationY>134</locationY>
        <defaultConnector>
            <targetReference>Case_Not_Owned_by_the_User</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>record.OwnerId</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>$User.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_InternalAISolveEmailConversation</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Case_Eligible_For_Solve_Recommendation</name>
        <label>Case Eligible For Solve Recommendation</label>
        <locationX>1903</locationX>
        <locationY>674</locationY>
        <defaultConnector>
            <targetReference>Not_eligible</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Eligible_for_Triggering_Solve</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SolveRecord.forethought__EmailResponseName__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Case_Already_Accepted_Rejected</targetReference>
            </connector>
            <label>Eligible for Triggering Solve</label>
        </rules>
    </decisions>
    <decisions>
        <name>Email_Sent_Success</name>
        <label>Email Sent Success</label>
        <locationX>1172</locationX>
        <locationY>1754</locationY>
        <defaultConnectorLabel>Failure</defaultConnectorLabel>
        <rules>
            <name>Success</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Approve_Send_Email</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Insert_EmailMessage_Record</targetReference>
            </connector>
            <label>Success</label>
        </rules>
    </decisions>
    <decisions>
        <description>If the case is already approved already, display error screen</description>
        <name>Is_Case_Accepted_Rejected</name>
        <label>Is Case Accepted/Rejected?</label>
        <locationX>50</locationX>
        <locationY>458</locationY>
        <defaultConnector>
            <targetReference>Get_EmailMessage</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Ready for routing</defaultConnectorLabel>
        <rules>
            <name>Already_Accepted_Rejected</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>record.QA_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approved</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>record.QA_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Rejected</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Recommendation_Used</targetReference>
            </connector>
            <label>Already Accepted/Rejected</label>
        </rules>
    </decisions>
    <decisions>
        <name>Selected_Option</name>
        <label>Selected Option</label>
        <locationX>204</locationX>
        <locationY>890</locationY>
        <defaultConnector>
            <targetReference>Capture_Rejection_Details</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Feedback_Helpful</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Is_the_Response_helpful</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Use_Internal_AI_Solve_Recommendation</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Send_Reject_Decision_Check</name>
        <label>Send/Reject Decision Check</label>
        <locationX>1766</locationX>
        <locationY>1214</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>SendAction</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ApproveChoice</leftValueReference>
                <operator>WasSelected</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Capture_values_from_the_Email_screen</targetReference>
            </connector>
            <label>SendAction</label>
        </rules>
        <rules>
            <name>RejectAction</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>RejectChoice</leftValueReference>
                <operator>WasSelected</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>RejectScreen</targetReference>
            </connector>
            <label>RejectAction</label>
        </rules>
    </decisions>
    <decisions>
        <description>Check if the InternalAISolveEmailConverstation has Valid_Request__c = &quot;valid_request&quot; AND Return_Response__c = true</description>
        <name>Valid_Internal_AI_Response_Exists</name>
        <label>Valid Internal AI Response Exists?</label>
        <locationX>976</locationX>
        <locationY>350</locationY>
        <defaultConnector>
            <targetReference>Get_Forethought_Solve_Recommendations</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Valid_InternalAI_Response</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_InternalAISolveEmailConversation.Valid_Request__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>valid_request</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_InternalAISolveEmailConversation.Return_Response__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_Case_Accepted_Rejected</targetReference>
            </connector>
            <label>Valid Internal AI Response</label>
        </rules>
    </decisions>
    <description>This Screen Flow is available on Engagement Case detail page for Solve QA Agents to approve and send Solve Email to the customer or Reject and provide feedback in a single workflow.
- BTE-3837 - Allow Claimed Case to Re-Enter the QA Backlog
- BTE-3861 - Update Success Messages for Approvals and Rejections
- BTE-3837 - DefaultFromAddress Error Fix
- BTE-3849 - Incorrect Case Creation from Email Replies for Forethought Solve
- BTE-4006 - Route QA Eligible Cases to QA Queue via Omni
- BTE-4006 - Moved QA Fields to Case Object
- BTE-4102 - Integrate Internal AI response to Solve UI
- BTE-4205 - Automate Auto-Solve Status on Case
- BTE-4293 - Auto-Solve UI Updates / QA Guidance</description>
    <dynamicChoiceSets>
        <name>HelpfulResponse</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>Was_the_response_helpful__c</picklistField>
        <picklistObject>InternalAISolveEmailConversation__c</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>IncompleteResponseChoiceSet</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>Incomplete_Response_Details__c</picklistField>
        <picklistObject>InternalAISolveEmailConversation__c</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>IncorrectResponseChoiceSet</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>Incorrect_Response_Details__c</picklistField>
        <picklistObject>InternalAISolveEmailConversation__c</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>NegativeFeedbackChoiceSet</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>Negative_Feedback__c</picklistField>
        <picklistObject>InternalAISolveEmailConversation__c</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>PositiveFeedbackChoiceSet</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>Positive_Feedback__c</picklistField>
        <picklistObject>InternalAISolveEmailConversation__c</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>RejectionFeedbackChoiceSet</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>Rejection_Reason__c</picklistField>
        <picklistObject>forethought__ForethoughtSolveEmailConversation__c</picklistObject>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <formulas>
        <name>EditedResponseText</name>
        <dataType>String</dataType>
        <expression>JSENCODE({!EmailBodyEditable.fieldValue})</expression>
    </formulas>
    <formulas>
        <name>IsCaseOwnerCurrentUser</name>
        <dataType>Boolean</dataType>
        <expression>LEFT({!record.OwnerId},3) = {!$User.Id}</expression>
    </formulas>
    <formulas>
        <name>QAUserId15Digit</name>
        <dataType>String</dataType>
        <expression>LEFT({!Get_Forethought_Solve_Recommendations.QA_User__r.Id},15)</expression>
    </formulas>
    <formulas>
        <name>SubjectwithThreadId</name>
        <dataType>String</dataType>
        <expression>{!record.Subject} &amp; &apos; &apos; &amp; {!record.Case_Reference__c}</expression>
    </formulas>
    <interviewLabel>Forethought Solve Recommendation Screen Flow {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Auto-Solve Email Recommendation</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <description>Create Exception Log event from fault line details in objExceptionLogEvent</description>
        <name>Exception_Log_Event</name>
        <label>Exception Log Event</label>
        <locationX>1832</locationX>
        <locationY>1862</locationY>
        <inputReference>objExceptionLogEvent</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Insert_EmailMessage</name>
        <label>Insert EmailMessage</label>
        <locationX>72</locationX>
        <locationY>1322</locationY>
        <connector>
            <targetReference>Update_Approval_Details</targetReference>
        </connector>
        <inputAssignments>
            <field>FromAddress</field>
            <value>
                <elementReference>$Label.DefaultFromAddress</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>FromName</field>
            <value>
                <elementReference>$Label.DefaultFromAddress</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>HtmlBody</field>
            <value>
                <elementReference>EmailBodyEditable.fieldValue</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ParentId</field>
            <value>
                <elementReference>record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Solve_Email__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <elementReference>SubjectwithThreadId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ToAddress</field>
            <value>
                <elementReference>DefaultToAddress</elementReference>
            </value>
        </inputAssignments>
        <object>EmailMessage</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Insert_EmailMessage_Record</name>
        <label>Insert EmailMessage Record</label>
        <locationX>776</locationX>
        <locationY>1862</locationY>
        <connector>
            <targetReference>Update_Case</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Initialize_Fault_Path_Details</targetReference>
        </faultConnector>
        <inputReference>EmailMessageNew</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Customer_Email_details</name>
        <label>Get Customer Email details</label>
        <locationX>1766</locationX>
        <locationY>890</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Default_To_Addresses</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ParentId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>EmailMessage</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_EmailMessage</name>
        <label>Get EmailMessage</label>
        <locationX>204</locationX>
        <locationY>566</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Default_ToAddresses</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ParentId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>EmailMessage</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Forethought_Solve_Recommendations</name>
        <label>Get Forethought Solve Recommendations</label>
        <locationX>1903</locationX>
        <locationY>458</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Solve_Record_to_a_Variable</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>forethought__Case__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>forethought__ForethoughtSolveEmailConversation__c</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Get the InternalAISolveEmailConversation record associated with the current case.</description>
        <name>Get_InternalAISolveEmailConversation</name>
        <label>Get InternalAISolveEmailConversation</label>
        <locationX>976</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Valid_Internal_AI_Response_Exists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Case__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>InternalAISolveEmailConversation__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Approval_Details</name>
        <label>Update Approval Details</label>
        <locationX>72</locationX>
        <locationY>1430</locationY>
        <connector>
            <targetReference>Update_Case_on_Approval</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_InternalAISolveEmailConversation.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Comments__c</field>
            <value>
                <elementReference>Comments</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Edited_Response__c</field>
            <value>
                <elementReference>EmailBodyEditable.fieldValue</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Positive_Feedback__c</field>
            <value>
                <elementReference>Positive_Feedback</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Was_the_response_helpful__c</field>
            <value>
                <elementReference>Is_the_Response_helpful</elementReference>
            </value>
        </inputAssignments>
        <object>InternalAISolveEmailConversation__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Case</name>
        <label>Update Case</label>
        <locationX>776</locationX>
        <locationY>1970</locationY>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Initialize_Fault_Path_Details</targetReference>
        </faultConnector>
        <inputReference>record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Case_on_Approval</name>
        <label>Update Case on Approval</label>
        <locationX>72</locationX>
        <locationY>1538</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Auto_Solve_Attempt__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Auto_Solve_Model__c</field>
            <value>
                <stringValue>Internal</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Auto_Solve_Status__c</field>
            <value>
                <stringValue>Attempted</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>QA_Status__c</field>
            <value>
                <stringValue>Approved</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>QA_User__c</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Case_on_Rejection</name>
        <label>Update Case on Rejection</label>
        <locationX>336</locationX>
        <locationY>1322</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Auto_Solve_Model__c</field>
            <value>
                <stringValue>Internal</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Auto_Solve_Status__c</field>
            <value>
                <stringValue>Rejected</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>QA_Status__c</field>
            <value>
                <stringValue>Rejected</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>QA_User__c</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Rejection_Details</name>
        <label>Update Rejection Details</label>
        <locationX>336</locationX>
        <locationY>1214</locationY>
        <connector>
            <targetReference>Update_Case_on_Rejection</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_InternalAISolveEmailConversation.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Comments__c</field>
            <value>
                <elementReference>Comments_Rejection</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Incomplete_Response_Details__c</field>
            <value>
                <elementReference>Copy_1_of_Incomplete_Response_Details</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Incorrect_Response_Details__c</field>
            <value>
                <elementReference>Copy_1_of_Incorrect_Response_Details</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Negative_Feedback__c</field>
            <value>
                <elementReference>Negative_Feedback</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Was_the_response_helpful__c</field>
            <value>
                <elementReference>Is_the_Response_helpful</elementReference>
            </value>
        </inputAssignments>
        <object>InternalAISolveEmailConversation__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Rejection_QA_Details_on_Case</name>
        <label>Update Rejection QA Details on Case</label>
        <locationX>2096</locationX>
        <locationY>1538</locationY>
        <inputReference>record</inputReference>
    </recordUpdates>
    <screens>
        <name>Capture_Rejection_Details</name>
        <label>Capture Rejection Details</label>
        <locationX>336</locationX>
        <locationY>998</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Capture_Rejection_Details_Read_Only</targetReference>
        </connector>
        <fields>
            <name>Negative_Feedback</name>
            <choiceReferences>NegativeFeedbackChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Negative Feedback</fieldText>
            <fieldType>DropdownBox</fieldType>
            <helpText>&lt;p&gt;Your response helps train future recommendations. Please choose carefully.&lt;/p&gt;</helpText>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Incorrect_Response_Details</name>
            <choiceReferences>IncorrectResponseChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Incorrect Response Details</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>false</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Negative_Feedback</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Incorrect Response</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>Incomplete_Response_Details</name>
            <choiceReferences>IncompleteResponseChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Incomplete Response Details</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>false</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Negative_Feedback</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Incomplete Response</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>Comments_Rejection</name>
            <fieldText>Comments</fieldText>
            <fieldType>LargeTextArea</fieldType>
            <helpText>&lt;p&gt;Provide any additional feedback you have about the recommendation&lt;/p&gt;</helpText>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Screen2RejectionMessage</name>
            <fieldText>&lt;p&gt;Click ‘Review’ to confirm the full rejection details&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Review</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Capture_Rejection_Details_Read_Only</name>
        <label>Capture Rejection Details Read-Only</label>
        <locationX>336</locationX>
        <locationY>1106</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Update_Rejection_Details</targetReference>
        </connector>
        <fields>
            <name>Copy_1_of_Negative_Feedback</name>
            <choiceReferences>NegativeFeedbackChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>Negative_Feedback</elementReference>
            </defaultValue>
            <fieldText>Negative Feedback</fieldText>
            <fieldType>DropdownBox</fieldType>
            <helpText>&lt;p&gt;Your response helps train future recommendations. Please choose carefully.&lt;/p&gt;</helpText>
            <inputsOnNextNavToAssocScrn>ResetValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Copy_1_of_Incorrect_Response_Details</name>
            <choiceReferences>IncorrectResponseChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>Incorrect_Response_Details</elementReference>
            </defaultValue>
            <fieldText>Incorrect Response Details</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>ResetValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>false</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Negative_Feedback</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Incorrect Response</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>Copy_1_of_Incomplete_Response_Details</name>
            <choiceReferences>IncompleteResponseChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>Incomplete_Response_Details</elementReference>
            </defaultValue>
            <fieldText>Incomplete Response Details</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>ResetValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>false</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Negative_Feedback</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Incomplete Response</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>Copy_1_of_Comments_Rejection</name>
            <defaultValue>
                <stringValue>{!Comments_Rejection}</stringValue>
            </defaultValue>
            <fieldText>Comments</fieldText>
            <fieldType>LargeTextArea</fieldType>
            <inputsOnNextNavToAssocScrn>ResetValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>false</isRequired>
        </fields>
        <nextOrFinishButtonLabel>Submit Rejection</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Case_Not_Owned_by_the_User</name>
        <label>Case Not Owned by the User</label>
        <locationX>2888</locationX>
        <locationY>242</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>CaseNotOwnedErrorMessage</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 14px; font-family: -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Roboto, Oxygen, Ubuntu, &amp;quot;Fira Sans&amp;quot;, &amp;quot;Droid Sans&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, sans-serif; color: rgb(23, 43, 77);&quot;&gt;Once this case is assigned, the Auto-Solve email recommendation will be visible, if applicable.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Refresh</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Internal_AI_Solve_Response</name>
        <label>Internal AI Solve Response</label>
        <locationX>204</locationX>
        <locationY>782</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Selected_Option</targetReference>
        </connector>
        <fields>
            <name>Helptext</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(71, 166, 71);&quot;&gt;This email can be edited&lt;/strong&gt;&lt;strong style=&quot;color: var(--custom-palette-color, inherit);&quot;&gt;.&lt;/strong&gt;&lt;strong&gt; &lt;/strong&gt;If approved, you will be able to update and format the email before sending to the customer. &lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Internal_AI_Response</name>
            <extensionName>c:screenFlowRichText</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>visibleLines</name>
                <value>
                    <numberValue>30.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>disabledVar</name>
                <value>
                    <booleanValue>false</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldValue</name>
                <value>
                    <elementReference>Get_InternalAISolveEmailConversation.Response__c</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fromSendPartnerFlow</name>
                <value>
                    <booleanValue>false</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldLabel</name>
                <value>
                    <stringValue>Email Response</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>Is_the_Response_helpful</name>
            <choiceReferences>HelpfulResponse</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Is the Response helpful?</fieldText>
            <fieldType>DropdownBox</fieldType>
            <helpText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 14px; font-family: -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Roboto, Oxygen, Ubuntu, &amp;quot;Fira Sans&amp;quot;, &amp;quot;Droid Sans&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, sans-serif; color: rgb(23, 43, 77);&quot;&gt;If the recommendation is partially accurate, select ‘Yes’. If the recommendation does not apply to the customer inquiry, select ‘No’.&lt;/span&gt;&lt;/p&gt;</helpText>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>NextMessageToEditScreen</name>
            <fieldText>&lt;p&gt;Click &apos;Next&apos; to proceed to the edit screen.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Is_the_Response_helpful</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Yes</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>NextMessageToRejectionScreen</name>
            <fieldText>&lt;p&gt;Click &apos;Next&apos; to provide additional rejection feedback&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Is_the_Response_helpful</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>Constant_No</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <nextOrFinishButtonLabel>Next</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>This case did not receive a solve recommendation.</description>
        <name>Not_eligible</name>
        <label>Not eligible</label>
        <locationX>2624</locationX>
        <locationY>782</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Copy_1_of_ErrorMsg</name>
            <fieldText>&lt;p&gt;There is no Auto-Solve email recommendation for this case.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>false</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Recommendation_Used</name>
        <label>Recommendation Used</label>
        <locationX>976</locationX>
        <locationY>2606</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Copy_1_of_Claim_Message</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 14px; font-family: -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Roboto, Oxygen, Ubuntu, &amp;quot;Fira Sans&amp;quot;, &amp;quot;Droid Sans&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, sans-serif; color: rgb(23, 43, 77);&quot;&gt;Auto-Solve email recommendation has been approved/rejected on this case already. &lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Done</nextOrFinishButtonLabel>
        <showFooter>false</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>RejectScreen</name>
        <label>RejectScreen</label>
        <locationX>2096</locationX>
        <locationY>1322</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Capture_Rejection_Feedback</targetReference>
        </connector>
        <fields>
            <name>Rejection_Reason</name>
            <choiceReferences>RejectionFeedbackChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>Rejection_Reason_1</elementReference>
            </defaultValue>
            <fieldText>Rejection Reason</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>ResetValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Rejection_Feedback</name>
            <defaultValue>
                <stringValue>{!Rejection_Feedback_1}</stringValue>
            </defaultValue>
            <fieldText>Rejection Feedback</fieldText>
            <fieldType>LargeTextArea</fieldType>
            <inputsOnNextNavToAssocScrn>ResetValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Rejection_Reason</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Inaccurate Response</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <nextOrFinishButtonLabel>Submit Rejection</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>SendScreen</name>
        <label>SendScreen</label>
        <locationX>1172</locationX>
        <locationY>1430</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Update_QA_details_on_Case</targetReference>
        </connector>
        <fields>
            <name>From</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>$Label.DefaultFromAddress</elementReference>
            </defaultValue>
            <fieldText>From</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>To</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>DefaultToAddress</elementReference>
            </defaultValue>
            <fieldText>To</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Subject</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>SubjectwithThreadId</elementReference>
            </defaultValue>
            <fieldText>Subject</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>EmailBodyReadOnly</name>
            <extensionName>c:screenFlowRichText</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>required</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>disabledVar</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldValue</name>
                <value>
                    <elementReference>Get_Forethought_Solve_Recommendations.forethought__EmailContentHTML__c</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fromSendPartnerFlow</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>FinalSuccessMsg</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(255, 0, 0);&quot;&gt;The content was generated by &lt;/span&gt;&lt;span style=&quot;background-color: initial; color: rgb(255, 0, 0);&quot;&gt;AI&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 0, 0);&quot;&gt;, which may include inaccurate or harmful responses. You assume responsibility for the content when it’s shared.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Send Email</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Success_Message</name>
        <label>Success Message</label>
        <locationX>72</locationX>
        <locationY>1106</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Send_Email_to_Contact</targetReference>
        </connector>
        <fields>
            <name>FromApprovalScreen3</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>$Label.DefaultFromAddress</elementReference>
            </defaultValue>
            <fieldText>From</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>ToApprovalScreen3</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>DefaultToAddress</elementReference>
            </defaultValue>
            <fieldText>To</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>SubjectApprovalScreen3</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>SubjectwithThreadId</elementReference>
            </defaultValue>
            <fieldText>Subject</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Internal_AI_Response_ReadOnly</name>
            <extensionName>c:screenFlowRichText</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>disabledVar</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldValue</name>
                <value>
                    <elementReference>EmailBodyEditable.fieldValue</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fromSendPartnerFlow</name>
                <value>
                    <booleanValue>false</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>MessageApprovalScreen3</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(255, 0, 0);&quot;&gt;The content was generated by AI, which may include inaccurate or harmful responses. You assume responsibility for the content when it’s shared&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&lt;span class=&quot;ql-cursor&quot;&gt;﻿&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Send Email</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>This screen is an email compiler that has contents auto populated on cases that have successful intent detection from Forethought Solve</description>
        <name>Use_Forethought_Solve_Recommendation</name>
        <label>Use Forethought Solve Recommendation</label>
        <locationX>1766</locationX>
        <locationY>1106</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Send_Reject_Decision_Check</targetReference>
        </connector>
        <fields>
            <name>WarningMessage</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 12px; color: rgb(255, 0, 0);&quot;&gt;This email cannot be edited.&lt;/strong&gt;&lt;strong style=&quot;font-size: 12px;&quot;&gt; &lt;/strong&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;It is fully formatted and if approved will be sent to the customer as-is.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>EmailBody</name>
            <extensionName>c:screenFlowRichText</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>visibleLines</name>
                <value>
                    <numberValue>30.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>required</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldValue</name>
                <value>
                    <elementReference>Get_Forethought_Solve_Recommendations.forethought__EmailContentHTML__c</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fromSendPartnerFlow</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>disabledVar</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldLabel</name>
                <value>
                    <stringValue>Email Response</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>ActionButtons</name>
            <choiceReferences>ApproveChoice</choiceReferences>
            <choiceReferences>RejectChoice</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Accuracy Evaluation</fieldText>
            <fieldType>RadioButtons</fieldType>
            <helpText>&lt;p&gt;{!AccuracyEvaluationMessage}&lt;/p&gt;</helpText>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Rejection_Reason_1</name>
            <choiceReferences>RejectionFeedbackChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Rejection Reason</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>false</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>RejectChoice</leftValueReference>
                    <operator>WasSelected</operator>
                    <rightValue>
                        <booleanValue>true</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>Rejection_Feedback_1</name>
            <fieldText>Rejection Feedback</fieldText>
            <fieldType>LargeTextArea</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>RejectChoice</leftValueReference>
                    <operator>WasSelected</operator>
                    <rightValue>
                        <booleanValue>true</booleanValue>
                    </rightValue>
                </conditions>
                <conditions>
                    <leftValueReference>Rejection_Reason_1</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Inaccurate Response</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>AccuracyEvaluationApproveMessage</name>
            <fieldText>&lt;p&gt;Click &apos;Review’ to confirm the full email details before sending to the customer&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>or</conditionLogic>
                <conditions>
                    <leftValueReference>ApproveChoice</leftValueReference>
                    <operator>WasSelected</operator>
                    <rightValue>
                        <booleanValue>true</booleanValue>
                    </rightValue>
                </conditions>
                <conditions>
                    <leftValueReference>RejectChoice</leftValueReference>
                    <operator>WasSelected</operator>
                    <rightValue>
                        <booleanValue>true</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <nextOrFinishButtonLabel>Review</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>This screen is an email compiler that has contents auto populated on cases that have successful response detection from Internal AI Solve</description>
        <name>Use_Internal_AI_Solve_Recommendation</name>
        <label>Use Internal AI Solve Recommendation</label>
        <locationX>72</locationX>
        <locationY>998</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <backButtonLabel>Previous</backButtonLabel>
        <connector>
            <targetReference>Success_Message</targetReference>
        </connector>
        <fields>
            <name>EmailBodyEditable</name>
            <extensionName>c:screenFlowRichText</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>visibleLines</name>
                <value>
                    <numberValue>30.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>required</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldValue</name>
                <value>
                    <elementReference>Internal_AI_Response.fieldValue</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fromSendPartnerFlow</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>disabledVar</name>
                <value>
                    <booleanValue>false</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>Positive_Feedback</name>
            <choiceReferences>PositiveFeedbackChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Positive Feedback</fieldText>
            <fieldType>DropdownBox</fieldType>
            <helpText>&lt;p&gt;Your response helps train future recommendations. Please choose carefully. &lt;/p&gt;</helpText>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Comments</name>
            <fieldText>Comments</fieldText>
            <fieldType>LargeTextArea</fieldType>
            <helpText>&lt;p&gt;Provide any additional feedback you have about the recommendation or edits you made&lt;/p&gt;</helpText>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>ApprovalEditScreenMsg</name>
            <fieldText>&lt;p&gt;Click &apos;Review&apos; to confirm the full email details before sending to the customer&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Review</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>1806</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Case_Assigned_to_the_current_user</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>AccuracyEvaluationMessage</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;&lt;em style=&quot;color: rgb(176, 172, 172);&quot;&gt;Since this email cannot be edited, approvals should be 100% accurate﻿&lt;/em&gt;&lt;/p&gt;</text>
    </textTemplates>
    <textTemplates>
        <description>Exception Log Message containing flow details in a fault path.</description>
        <name>strExceptionLogMessage</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;&amp;lt;p&amp;gt;Fault Message: {!$Flow.FaultMessage}&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;----&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;Interview Guid: {!$Flow.InterviewGuid}&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;----&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;Current Record: {!$Flow.CurrentRecord}&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;----&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;You can find failed flow interviews with the link below. The link below is for Production failed interviews, but if you would like to find them in another environment in Setup, simply search for ‘Paused and Failed Flow Interviews’ in Setup’s Quick Find bar, and switch to the All Failed Flow Interviews List View. You can use the interview &quot;Interview Guid&quot; above to locate this specific failures.&amp;amp;nbsp;&amp;amp;nbsp;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;https://gusto.lightning.force.com/lightning/setup/Pausedflows/home&amp;lt;/p&amp;gt;&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>DefaultToAddress</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>EmailMessageNew</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>EmailMessage</objectType>
    </variables>
    <variables>
        <name>objExceptionLogEvent</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>Exception_Log_Event__e</objectType>
    </variables>
    <variables>
        <name>record</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SolveRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>forethought__ForethoughtSolveEmailConversation__c</objectType>
    </variables>
</Flow>
