<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Get_Compliance_Parent_Case_Values</name>
        <label>Get Compliance Parent Case Values</label>
        <locationX>2162</locationX>
        <locationY>816</locationY>
        <actionName>TaxComplianceController</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>list_ChildCases</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
        <nameSegment>TaxComplianceController</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Send_Auto_Solve_Email</name>
        <label>Send Auto Solve Email</label>
        <locationX>4802</locationX>
        <locationY>2088</locationY>
        <actionName>TaxResAutoSolveUtil</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Check_Fault</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Update_Automation_Status</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>list_Cases</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
        <nameSegment>TaxResAutoSolveUtil</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Send_Case_Closing_Email</name>
        <label>Send Case Closing Email</label>
        <locationX>3086</locationX>
        <locationY>1416</locationY>
        <actionName>Case.Parent_Case_Closing_Email_Alert</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.ParentId</elementReference>
            </value>
        </inputParameters>
        <nameSegment>Case.Parent_Case_Closing_Email_Alert</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Send_Case_Reopening_Email</name>
        <label>Send Case Reopening Email</label>
        <locationX>2690</locationX>
        <locationY>708</locationY>
        <actionName>Case.Parent_Case_Reopening_Email_Alert</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Parent.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>Case.Parent_Case_Reopening_Email_Alert</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Send_generic_email_alert</name>
        <label>Send generic email alert</label>
        <locationX>50</locationX>
        <locationY>492</locationY>
        <actionName>Case.Auto_Email_From_Case_Reason</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Create_Email_Message</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>Case.Auto_Email_From_Case_Reason</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Send_initial_response_when_Account_Specialist_pickup_a_Case</name>
        <label>Send initial response when Account Specialist pickup a Case</label>
        <locationX>5330</locationX>
        <locationY>1290</locationY>
        <actionName>TaxResAutoSolveEmailHelper</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Copy_1_of_Check_Fault</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Case_Update_Failed_1</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>list_Cases</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
        <nameSegment>TaxResAutoSolveEmailHelper</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>With_SUI_rate_Send_generic_email_alert</name>
        <label>With SUI rate_Send generic email alert</label>
        <locationX>1370</locationX>
        <locationY>492</locationY>
        <actionName>Case.Auto_Email_From_Case_Reason</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>With_SUI_Rate_Create_Email_Message</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>Case.Auto_Email_From_Case_Reason</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <apiVersion>55.0</apiVersion>
    <assignments>
        <name>Set_Flag_IsAnyChildCaseOpen</name>
        <label>Set Flag IsAnyChildCaseOpen True</label>
        <locationX>3482</locationX>
        <locationY>924</locationY>
        <assignmentItems>
            <assignToReference>bool_IsAnyChildCaseOpen</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Status_of_All_Child_Cases</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Action_Taken_empty</name>
        <label>Action Taken empty?</label>
        <locationX>4406</locationX>
        <locationY>1398</locationY>
        <defaultConnector>
            <targetReference>Case_Update_Email_Sent_3</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Populated</defaultConnectorLabel>
        <rules>
            <name>null_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Mass_Email_Step__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Case_Update_Email_Sent_1</targetReference>
            </connector>
            <label>null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Action_Taken_null</name>
        <label>Action Taken null?</label>
        <locationX>5066</locationX>
        <locationY>600</locationY>
        <defaultConnector>
            <targetReference>Case_Update_Email_Sent_2</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Populated</defaultConnectorLabel>
        <rules>
            <name>null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Mass_Email_Step__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Case_Update_Email_Sent</targetReference>
            </connector>
            <label>null</label>
        </rules>
    </decisions>
    <decisions>
        <description>Has the case been updated with auto solve criteria from TaxNoticePackageBatch to trigger email alert.</description>
        <name>Auto_Send_Package_0</name>
        <label>Auto Send Package?</label>
        <locationX>5198</locationX>
        <locationY>1980</locationY>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_0</name>
            <conditionLogic>1 AND 2 AND 3 AND 4 AND 5 AND 6 AND 7 AND 8</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Auto_Response_Email_Content__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Tax_Res_Auto_Response_Sent__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.IsClosed</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$User.Username</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>heroku@gusto.com</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Auto_Response_Email_Sent__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Solved</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Automation_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Started</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Automation_Message__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Auto-Solve Batch</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Auto_Solve_Email</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Fault</name>
        <label>Check Fault</label>
        <locationX>4802</locationX>
        <locationY>2196</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Fault</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Flow.FaultMessage</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Automation_Status</targetReference>
            </connector>
            <label>Fault</label>
        </rules>
        <rules>
            <name>Automation_not_equal_to_Failed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Automation_Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Failed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Case_Update_Email_Sent_Flag2</targetReference>
            </connector>
            <label>Automation not equal to Failed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_all_child_cases_are_closed</name>
        <label>Check if all child cases are closed</label>
        <locationX>3218</locationX>
        <locationY>1200</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>All_Child_cases_are_closed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>bool_IsAnyChildCaseOpen</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Close_Parent_Case</targetReference>
            </connector>
            <label>All Child cases are closed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Copy_1_of_Check_Fault</name>
        <label>Copy 1 of Check Fault</label>
        <locationX>5330</locationX>
        <locationY>1398</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Case_Update_Email_Sent_3</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Fault_Handling</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Flow.FaultMessage</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Case_Update_Email_Sent_1</targetReference>
            </connector>
            <label>Fault Handling</label>
        </rules>
    </decisions>
    <decisions>
        <name>Insert</name>
        <label>Insert?</label>
        <locationX>2624</locationX>
        <locationY>384</locationY>
        <defaultConnector>
            <targetReference>Is_child_Case_Reopened</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Insert_Records</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsInsert</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>OCR_Message_Check_c</targetReference>
            </connector>
            <label>Insert?</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Case_Closed</name>
        <label>Is Case Closed</label>
        <locationX>3394</locationX>
        <locationY>816</locationY>
        <defaultConnector>
            <targetReference>Set_Flag_IsAnyChildCaseOpen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_Closed</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Check_Status_of_All_Child_Cases.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Check_Status_of_All_Child_Cases.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>No Longer Needed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Status_of_All_Child_Cases</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_child_Case_Reopened</name>
        <label>Is child Case Reopened?</label>
        <locationX>3152</locationX>
        <locationY>492</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Child_Case_Reopened</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ParentId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Open</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Reopen_Parent_Case</targetReference>
            </connector>
            <label>Child Case Reopened</label>
        </rules>
        <rules>
            <name>Child_Case_Closed</name>
            <conditionLogic>1 AND ((2 AND 3) OR (4 AND 5))</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ParentId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.Status</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.Status</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>No Longer Needed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>No Longer Needed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Fetch_all_associated_child_records</targetReference>
            </connector>
            <label>Child Case Closed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Parent_Case_Available</name>
        <label>Is Parent Case Available</label>
        <locationX>2294</locationX>
        <locationY>708</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Has_Parent_Id</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ParentId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Compliance_Parent_Case_Values</targetReference>
            </connector>
            <label>Has Parent Id</label>
        </rules>
    </decisions>
    <decisions>
        <description>It Checks whether the case is created via Email or not!</description>
        <name>OCR_Message_Check_c</name>
        <label>OCR Message Check</label>
        <locationX>2096</locationX>
        <locationY>492</locationY>
        <defaultConnector>
            <targetReference>Create_Compliance_Record</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>OCR_Message_c</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.OCR_Message__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Created from Email to Case</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.OCR_Message__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Created from Cloned Case</stringValue>
                </rightValue>
            </conditions>
            <label>OCR Message</label>
        </rules>
    </decisions>
    <decisions>
        <name>RecordType_Name</name>
        <label>RecordType Name</label>
        <locationX>2360</locationX>
        <locationY>276</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Tax_res</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Tax_Res</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Tax_Res_Read_Only</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Validation_Checks</targetReference>
            </connector>
            <label>Tax res</label>
        </rules>
        <rules>
            <name>Compliance</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Record_Type_Name__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Compliance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Insert</targetReference>
            </connector>
            <label>Compliance</label>
        </rules>
    </decisions>
    <decisions>
        <name>RecordType_Paths</name>
        <label>RecordType Paths</label>
        <locationX>5682</locationX>
        <locationY>276</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Tax_res_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Tax Res</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Checklist_Email_Alert</targetReference>
            </connector>
            <label>Tax res</label>
        </rules>
    </decisions>
    <decisions>
        <name>Send_Checklist_Email_Alert</name>
        <label>Send Checklist Email Alert</label>
        <locationX>5198</locationX>
        <locationY>384</locationY>
        <defaultConnector>
            <targetReference>Send_Research_Email_Alert</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Check_if_TaxRes_case_is_Data_Capture_Complete</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Data Capture Complete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Owner:Group.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Specialist_Queue</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_to_Ready_for_Research</targetReference>
            </connector>
            <label>Check if TaxRes case is Data Capture Complete?</label>
        </rules>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Automation_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Started</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Automation_Message__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Tax Res Ready for Checklist Email</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Auto_Response_Email_Content__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Email_Alert_1</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Send_Research_Email_Alert</name>
        <label>Send Research Email Alert</label>
        <locationX>5198</locationX>
        <locationY>1182</locationY>
        <defaultConnector>
            <targetReference>Auto_Send_Package_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Automation_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Started</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Automation_Message__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Tax Res Research in progress Email</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Auto_Response_Email_Content__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Origin</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Electronic Notice</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Email_Alert</targetReference>
            </connector>
            <label>Yes Non Electronic Notice</label>
        </rules>
        <rules>
            <name>Yes_Electronic_Notice</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Origin</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Electronic Notice</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Automation_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Started</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Automation_Message__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Tax Res Research in progress Email</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Auto_Response_Email_Content__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_initial_response_when_Account_Specialist_pickup_a_Case</targetReference>
            </connector>
            <label>Yes Electronic Notice</label>
        </rules>
    </decisions>
    <decisions>
        <name>Validation_Checks</name>
        <label>Validation Checks</label>
        <locationX>842</locationX>
        <locationY>384</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Valid_Case</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varIsAutoCloseValidCase_WithoutSUIRate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_generic_email_alert</targetReference>
            </connector>
            <label>Valid Case Without SUI Rate</label>
        </rules>
        <rules>
            <name>Valid_Case_with_SUI_Rate</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varIsAutoCloseValidCase_WithSUIRate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>With_SUI_Rate_Case_Update_Email_Sent_Flag</targetReference>
            </connector>
            <label>Valid Case with SUI Rate</label>
        </rules>
        <rules>
            <name>Without_Contact</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varIsContactMissing</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Missing_Contact_Error_Update</targetReference>
            </connector>
            <label>Without Contact</label>
        </rules>
        <rules>
            <name>Valid_Closed_Case_with_SUI_Rate</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varIsSUIRateCaseClosed</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>With_SUI_rate_Send_generic_email_alert</targetReference>
            </connector>
            <label>Valid Closed Case with SUI Rate</label>
        </rules>
    </decisions>
    <description>- Shyam: Removed VarAutoCloseValidCase-WinoutSUI formula
- Ankit : Fixed parent child close issue
- Compliance branch added
- Ela: Removed the unwanted FBED decision boxes
- Ela: Removing email message creation from FBED TFIR email flow
Main After Save Flow trigger for Case. this flow will look at record type first and call sub flows when required. PLEASE ADD RECORD TYPE IN START CONDITIONS WHEN ADDING NEW LOGIC.
- NEW: Calling apex email with attachment logic for FBED auto solve notification Sui and Non Sui both
- NEW: Introduced Electronic Notice logic
- Removed the logic to cleat Automation Message field
- Added Status update to Ready for Research (Async path)
- Added Bypass logic.
--Added IsCloned Logic to Bypass logic to create Tax Compliance when cloned</description>
    <environments>Default</environments>
    <formulas>
        <name>IsInsert</name>
        <dataType>Boolean</dataType>
        <expression>ISNEW()</expression>
    </formulas>
    <formulas>
        <name>varAutSolve</name>
        <dataType>Boolean</dataType>
        <expression>ISCHANGED( {!$Record.Auto_Response_Email_Content__c} )</expression>
    </formulas>
    <formulas>
        <name>varIsAutoCloseValidCase_WithoutSUIRate</name>
        <dataType>Boolean</dataType>
        <expression>FALSE &amp;&amp;
{!$Record.RecordType.Name} = &apos;Tax Res&apos; &amp;&amp;
{!$Record.ContactEmail} &lt;&gt; null &amp;&amp;
{!$Record.Auto_Response_Email_Content__c} &lt;&gt; null &amp;&amp;
{!$Record.Tax_Res_Auto_Response_Sent__c} = false &amp;&amp;
{!$Record.IsClosed} = false &amp;&amp;
 ISPICKVAL( {!$Record.Status} , &apos;Data Capture in Progress&apos; )  &amp;&amp;
ISCHANGED({!$Record.Auto_Response_Email_Content__c}) &amp;&amp;
(INCLUDES({!$Record.Mass_Email_Step__c} , &apos;No Notice Attached Auto-Solve fired&apos; ) || 
INCLUDES({!$Record.Mass_Email_Step__c} , &apos;After Gusto Auto-Solve fired&apos;) ||  
INCLUDES({!$Record.Mass_Email_Step__c} , &apos;Prior to Gusto Auto-Solve fired&apos;) ||
INCLUDES({!$Record.Mass_Email_Step__c} , &apos;Duplicate Notice Auto-Solve fired&apos;))</expression>
    </formulas>
    <formulas>
        <name>varIsAutoCloseValidCase_WithSUIRate</name>
        <dataType>Boolean</dataType>
        <expression>{!$Record.RecordType.Name} = &apos;Tax Res&apos; &amp;&amp;
{!$Record.ContactEmail} &lt;&gt; null &amp;&amp;
{!$Record.Auto_Response_Email_Content__c} &lt;&gt; null &amp;&amp;
{!$Record.Tax_Res_Auto_Response_Sent__c} = false &amp;&amp;
{!$Record.IsClosed} = false &amp;&amp;
 ISPICKVAL( {!$Record.Status} , &apos;Data Capture in Progress&apos; )  &amp;&amp;
ISCHANGED({!$Record.Auto_Response_Email_Content__c}) &amp;&amp;
INCLUDES({!$Record.Mass_Email_Step__c} , &apos;SUI Rate Auto-Solve fired&apos;)</expression>
    </formulas>
    <formulas>
        <name>varIsContactMissing</name>
        <dataType>Boolean</dataType>
        <expression>{!$Record.RecordType.Name} = &apos;Tax Res&apos; &amp;&amp;
{!$Record.ContactEmail} = null &amp;&amp;
{!$Record.Auto_Response_Email_Content__c} &lt;&gt; null &amp;&amp;
{!$Record.Tax_Res_Auto_Response_Sent__c} = false &amp;&amp;
{!$Record.IsClosed} = false &amp;&amp;
 ISPICKVAL( {!$Record.Status} , &apos;Data Capture in Progress&apos; )</expression>
    </formulas>
    <formulas>
        <name>varIsSUIRateCaseClosed</name>
        <dataType>Boolean</dataType>
        <expression>({!$Record.RecordType.Name} = &apos;Tax Res - Read Only&apos;  ||
{!$Record.RecordType.Name} = &apos;Tax Res&apos;)
&amp;&amp;
{!$Record.ContactEmail} &lt;&gt; null &amp;&amp;
{!$Record.Auto_Response_Email_Content__c} &lt;&gt; null &amp;&amp;
{!$Record.Tax_Res_Auto_Response_Sent__c} = false &amp;&amp;
{!$Record.IsClosed} = true &amp;&amp;
 ISPICKVAL( {!$Record.Status} , &apos;Closed&apos; )  &amp;&amp;
INCLUDES({!$Record.Mass_Email_Step__c} , &apos;SUI Rate Auto-Solve fired&apos;)</expression>
    </formulas>
    <interviewLabel>Case {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Case After Save Trigger</label>
    <loops>
        <name>Check_Status_of_All_Child_Cases</name>
        <label>Check Status of All Child Cases</label>
        <locationX>3218</locationX>
        <locationY>708</locationY>
        <collectionReference>Fetch_all_associated_child_records</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Is_Case_Closed</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Check_if_all_child_cases_are_closed</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Compliance_Record</name>
        <label>Create Compliance Record</label>
        <locationX>2294</locationX>
        <locationY>600</locationY>
        <connector>
            <targetReference>Is_Parent_Case_Available</targetReference>
        </connector>
        <inputAssignments>
            <field>Case__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Tax_Compliance__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Email_Message</name>
        <label>Create Email Message</label>
        <locationX>50</locationX>
        <locationY>600</locationY>
        <connector>
            <targetReference>Case_Update_Email_Sent_Flag</targetReference>
        </connector>
        <inputAssignments>
            <field>HtmlBody</field>
            <value>
                <elementReference>EmailText</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MessageDate</field>
            <value>
                <elementReference>CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ParentId</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>3</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <elementReference>$Record.Subject</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ToAddress</field>
            <value>
                <elementReference>$Record.ContactEmail</elementReference>
            </value>
        </inputAssignments>
        <object>EmailMessage</object>
    </recordCreates>
    <recordCreates>
        <name>With_SUI_Rate_Create_Email_Message</name>
        <label>With SUI Rate Create Email Message</label>
        <locationX>1370</locationX>
        <locationY>600</locationY>
        <connector>
            <targetReference>Update_Case_once_email_is_sent</targetReference>
        </connector>
        <inputAssignments>
            <field>HtmlBody</field>
            <value>
                <elementReference>EmailText</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MessageDate</field>
            <value>
                <elementReference>CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ParentId</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>3</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <elementReference>$Record.Subject</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ToAddress</field>
            <value>
                <elementReference>$Record.ContactEmail</elementReference>
            </value>
        </inputAssignments>
        <object>EmailMessage</object>
    </recordCreates>
    <recordLookups>
        <name>Fetch_all_associated_child_records</name>
        <label>Fetch all associated child records</label>
        <locationX>3218</locationX>
        <locationY>600</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Status_of_All_Child_Cases</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ParentId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ParentId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Case</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Case_Update_Email_Sent</name>
        <label>Case Update Email Sent</label>
        <locationX>4802</locationX>
        <locationY>708</locationY>
        <connector>
            <targetReference>Send_Research_Email_Alert</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Case_Update_Failed</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Auto_Response_Email_Content__c</field>
            <value>
                <stringValue></stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Automation_Message__c</field>
            <value>
                <stringValue></stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Automation_Status__c</field>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Mass_Email_Step__c</field>
            <value>
                <stringValue>Tax Res Ready for Checklist Email</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Case_Update_Email_Sent_1</name>
        <label>Case Update Email Sent</label>
        <locationX>4142</locationX>
        <locationY>1506</locationY>
        <connector>
            <targetReference>Auto_Send_Package_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Case_Update_Failed_1</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Auto_Response_Email_Content__c</field>
            <value>
                <stringValue></stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Automation_Status__c</field>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Mass_Email_Step__c</field>
            <value>
                <stringValue>Tax Res Research in progress Email</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Case_Update_Email_Sent_2</name>
        <label>Case Update Email Sent</label>
        <locationX>5330</locationX>
        <locationY>708</locationY>
        <connector>
            <targetReference>Send_Research_Email_Alert</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Case_Update_Failed</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Auto_Response_Email_Content__c</field>
            <value>
                <stringValue></stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Automation_Message__c</field>
            <value>
                <stringValue></stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Automation_Status__c</field>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Mass_Email_Step__c</field>
            <value>
                <stringValue>{!$Record.Mass_Email_Step__c};Checklist in progress Email Alert</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Case_Update_Email_Sent_3</name>
        <label>Case Update Email Sent</label>
        <locationX>4670</locationX>
        <locationY>1506</locationY>
        <connector>
            <targetReference>Auto_Send_Package_0</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Case_Update_Failed_1</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Auto_Response_Email_Content__c</field>
            <value>
                <stringValue></stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Automation_Status__c</field>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Mass_Email_Step__c</field>
            <value>
                <stringValue>{!$Record.Mass_Email_Step__c};Tax Res Research in progress Email</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Case_Update_Email_Sent_Flag</name>
        <label>Case Update Email Sent Flag</label>
        <locationX>50</locationX>
        <locationY>708</locationY>
        <faultConnector>
            <targetReference>Handle_Failure</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Automation_Status__c</field>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <stringValue>0121M000001Yf5g</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Closed</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Tax_Res_Auto_Response_Sent__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Case_Update_Email_Sent_Flag2</name>
        <label>Case Update Email Sent Flag2</label>
        <locationX>4802</locationX>
        <locationY>2304</locationY>
        <inputAssignments>
            <field>Automation_Status__c</field>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Closed</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Tax_Res_Auto_Response_Sent__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Case_Update_Failed</name>
        <label>Case Update Failed</label>
        <locationX>5066</locationX>
        <locationY>816</locationY>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Send_Research_Email_Alert</targetReference>
        </connector>
        <inputAssignments>
            <field>Auto_Response_Email_Content__c</field>
            <value>
                <stringValue></stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Automation_Status__c</field>
            <value>
                <stringValue>Failed</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Case_Update_Failed_1</name>
        <label>Case Update Failed</label>
        <locationX>4406</locationX>
        <locationY>1614</locationY>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Auto_Send_Package_0</targetReference>
        </connector>
        <inputAssignments>
            <field>Auto_Response_Email_Content__c</field>
            <value>
                <stringValue></stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Automation_Status__c</field>
            <value>
                <stringValue>Failed</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Close_Parent_Case</name>
        <label>Close Parent Case</label>
        <locationX>3086</locationX>
        <locationY>1308</locationY>
        <connector>
            <targetReference>Send_Case_Closing_Email</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Status</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Closed</stringValue>
            </value>
        </filters>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Closed</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record.Parent</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Handle_Failure</name>
        <label>Handle Failure</label>
        <locationX>314</locationX>
        <locationY>816</locationY>
        <inputAssignments>
            <field>Automation_Status__c</field>
            <value>
                <stringValue>Failed</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Missing_Contact_Error_Update</name>
        <label>Missing Contact Error Update</label>
        <locationX>1106</locationX>
        <locationY>492</locationY>
        <inputAssignments>
            <field>Automation_Message__c</field>
            <value>
                <elementReference>MissingContactErrorMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Automation_Status__c</field>
            <value>
                <stringValue>Failed</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Reopen_Parent_Case</name>
        <label>Reopen Parent Case</label>
        <locationX>2690</locationX>
        <locationY>600</locationY>
        <connector>
            <targetReference>Send_Case_Reopening_Email</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Status</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Closed</stringValue>
            </value>
        </filters>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Open</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record.Parent</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Automation_Status</name>
        <label>Update Automation Status</label>
        <locationX>4538</locationX>
        <locationY>2304</locationY>
        <inputAssignments>
            <field>Automation_Status__c</field>
            <value>
                <stringValue>Failed</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Case_once_email_is_sent</name>
        <label>Update Case once email is sent</label>
        <locationX>1370</locationX>
        <locationY>708</locationY>
        <inputAssignments>
            <field>Automation_Status__c</field>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Tax_Res_Auto_Response_Sent__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_to_Ready_for_Research</name>
        <label>Update to Ready for Research</label>
        <locationX>4538</locationX>
        <locationY>492</locationY>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Ready for Research</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>With_SUI_Rate_Case_Update_Email_Sent_Flag</name>
        <label>With SUI Rate Case Update Email Sent Flag</label>
        <locationX>578</locationX>
        <locationY>492</locationY>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Handle_Failure</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Solved</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>3895</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>RecordType_Name</targetReference>
        </connector>
        <filterFormula>(NOT({!$Permission.Bypass_Flow_Case})
&amp;&amp; NOT({!$Permission.Bypass_Flows}))
&amp;&amp; {!$Record.RecordType.DeveloperName}=&apos;Tax_Res&apos; ||
{!$Record.RecordType.DeveloperName}=&apos;Tax_Res_Read_Only&apos; || {!$Record.RecordType.DeveloperName}=&apos;Compliance&apos;</filterFormula>
        <object>Case</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <scheduledPaths>
            <name>Asynchronously</name>
            <connector>
                <targetReference>RecordType_Paths</targetReference>
            </connector>
            <label>Asynchronously</label>
            <maxBatchSize>5</maxBatchSize>
            <offsetNumber>1</offsetNumber>
            <offsetUnit>Minutes</offsetUnit>
            <recordField>LastModifiedDate</recordField>
            <timeSource>RecordField</timeSource>
        </scheduledPaths>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Draft</status>
    <subflows>
        <name>Send_Email_Alert</name>
        <label>Send Email Alert</label>
        <locationX>4406</locationX>
        <locationY>1290</locationY>
        <connector>
            <targetReference>Action_Taken_empty</targetReference>
        </connector>
        <flowName>Auto_Send_Email_Alert</flowName>
        <inputAssignments>
            <name>blnCreateEmail</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Case</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Send_Email_Alert_1</name>
        <label>Send Email Alert</label>
        <locationX>5066</locationX>
        <locationY>492</locationY>
        <connector>
            <targetReference>Action_Taken_null</targetReference>
        </connector>
        <flowName>Auto_Send_Email_Alert</flowName>
        <inputAssignments>
            <name>blnCreateEmail</name>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Case</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <textTemplates>
        <name>EmailText</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;&lt;span style=&quot;font-size: medium; font-family: Times; color: rgb(0, 0, 0);&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: medium; font-family: Times; color: rgb(0, 0, 0);&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;table class=&quot;ql-table-blob&quot; style=&quot;font-family: Times; width: 629px; margin: 0px 10px 0px 1px; text-align: right;&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;padding: 0px 0px 20px; vertical-align: top;&quot;&gt;&lt;table cellpadding=&quot;0&quot; style=&quot;width: 629px;&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;table cellpadding=&quot;0&quot; width=&quot;100%&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; rowspan=&quot;2&quot; style=&quot;width: 1px;&quot;&gt;&lt;a href=&quot;http://www.gusto.com/&quot;&gt;&lt;img alt=&quot;Gusto Logo&quot; src=&quot;https://go.gusto.com/rs/110-WOX-868/images/gusto-rebrand-logo.png&quot; width=&quot;115&quot; style=&quot;outline: none; max-width: 120px; line-height: 16px;&quot;&gt;&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;table align=&quot;right&quot; cellpadding=&quot;0&quot; style=&quot;vertical-align: top;&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;border-right: 1px solid rgb(204, 204, 204); padding: 0px 10px;&quot;&gt;&lt;a href=&quot;https://app.gusto.com/login&quot; style=&quot;color: rgb(10, 128, 128); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; line-height: 18px; font-family: Arial, sans-serif; text-align: right; white-space: nowrap;&quot;&gt;Your Account&lt;/a&gt;&lt;/td&gt;&lt;td style=&quot;border: 0px none; padding-left: 10px;&quot;&gt;&lt;a href=&quot;https://support.gusto.com/&quot; style=&quot;color: rgb(10, 128, 128); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; line-height: 18px; font-family: Arial, sans-serif; text-align: right; white-space: nowrap;&quot;&gt;Help Center&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;padding: 7px 0px 5px; text-align: right; vertical-align: top;&quot;&gt;&lt;span style=&quot;font-size: 20px; font-family: Arial, Helvetica, sans-serif; line-height: 24px; margin: 0px; padding: 0px; color: rgb(0, 0, 0) !important;&quot;&gt;Message From Customer Support&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p style=&quot;text-align: right;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Hi {!$Record.Contact.FirstName},&lt;/p&gt;&lt;p&gt;{!$Record.Auto_Response_Email_Content__c}&lt;/p&gt;</text>
    </textTemplates>
    <textTemplates>
        <name>testtemplate</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;{!$Record.Automation_Message__c}&lt;/p&gt;&lt;p&gt;{!$Record.Record_Type_Name__c}&lt;/p&gt;&lt;p&gt;{!$Record.Automation_Status__c}&lt;/p&gt;&lt;p&gt;{!$Record.Tax_Res_Auto_Response_Sent__c}&lt;/p&gt;&lt;p&gt;{!$User.Username}&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>bool_IsAnyChildCaseOpen</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>CurrentDateTime</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <elementReference>$Flow.CurrentDateTime</elementReference>
        </value>
    </variables>
    <variables>
        <name>MissingContactErrorMessage</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>No contact linked. </stringValue>
        </value>
    </variables>
    <variables>
        <description>Trigger bypass Id record from Custom setting and subflow</description>
        <name>triggerBypassId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCase</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>Case</objectType>
    </variables>
</Flow>
